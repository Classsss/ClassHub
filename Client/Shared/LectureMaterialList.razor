@inject NavigationManager NavigationManager
@using ClassHub.Client.Shared

<style>
    .notice-row:hover {
        background-color: rgba(0, 0, 0, 0.1);
    }

    .notice-title:hover {
        color: #007bff;
        text-decoration: underline;
    }
</style>
<br />
<table class="table">
    <thead>
        <tr>
            <th style="width: 10%;">번호</th>
            <th style="width: 10%;">주차</th>
            <th style="width: 50%;">제목</th>
            <th style="width: 10%;">작성자</th>
            <th style="width: 10%;">게시일</th>
            <th style="width: 10%;">조회</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var lec_mat in lecture_materials)
        {
            @if (selectWeek.Contains(lec_mat.Week))
            {
                <tr class="notice-row" @onclick="@(() => ShowLecMat(lec_mat))" style="cursor:pointer;">
                    <td style="text-indent : 7px;">@lec_mat.Id</td>
                    <td style="text-indent : 7px;">@lec_mat.Week</td>
                    <td class="notice-title">@lec_mat.Title</td>
                    <td>@lec_mat.Author</td>
                    <td>@lec_mat.PublishDate.ToString("yyyy.MM.dd")</td>
                    <td style="text-indent : 7px;">@lec_mat.ViewCount</td>
                </tr>
            }
        }
    </tbody>
</table>


@code {
    [Parameter]
    public List<LectureMaterial> lecture_materials { get; set; }
    [Parameter]
    public List<int> selectWeek { get; set; }

    public int RoomId { get; set; }

    private void ShowLecMat(LectureMaterial lec_mat)
    {
        Console.WriteLine($"{lec_mat.Id}번 공지를 클릭하였습니다.");
        NavigationManager.NavigateTo(NavigationManager.Uri + $"/{lec_mat.Id}");
    }

    private int currentPage = 1;
    private int pageSize = 10; // 원하는 페이지당 표시할 항목 수를 설정합니다.
    private int totalPages = 0;

    protected override void OnParametersSet() // OninitializedAsync()를 대체함
    {
        lecture_materials = lecture_materials.OrderByDescending(a => a.Id).ToList();
    }
}