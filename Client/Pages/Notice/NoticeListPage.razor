@page "/classroom/{classroomid:int}/notice"
@layout MainLayout
@inject HttpClient Http
@using ClassHub.Shared
@using ClassHub.Client.Models

<Board Title="공지사항" Contents="@contents" />

@code {
    [Parameter]
    public int ClassRoomId { get; set; }


    private List<BoardContent> contents;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        contents = new List<BoardContent>();
        var notices = await Http.GetFromJsonAsync<List<Notice>>($"api/notice/{ClassRoomId}");
        if (notices != null)
        {
            foreach (var notice in notices)
            {
                this.contents.Add(new NoticeContent()
                {
                    room_id = notice.room_id,
                    content_id = notice.notice_id,
                    title = notice.title,
                    author = notice.author,
                    contents = notice.contents,
                    publish_date = notice.publish_date,
                    up_date = notice.up_date,
                    view_count = notice.view_count
                });
            }
        }
        StateHasChanged();
    }
}


