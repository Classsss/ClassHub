@page "/"
@inject AuthenticationService AuthService
@inject NavigationManager NavigationManager
@using ClassHub.Client.Models
@using Microsoft.AspNetCore.WebUtilities;

<Timetable Courses="Courses" />

@code {
    private List<Course> Courses = new List<Course> {
        new Course { Number = 1, Year = 2023, Semester = 1, Name = "Math", Instructor = "Prof. A", Day = DayOfWeek.Monday, StartTime = 9, EndTime = 10, ClassRoom = "Y1234" },
        new Course { Number = 2, Year = 2023, Semester = 1, Name = "Physics", Instructor = "Prof. B", Day = DayOfWeek.Wednesday, StartTime = 11, EndTime = 13, ClassRoom = "Y1234" },
        // 다른 강의 데이터를 추가하세요.
    };

    protected override void OnInitialized() {
        var uri = NavigationManager.ToAbsoluteUri(NavigationManager.Uri);
        if (QueryHelpers.ParseQuery(uri.Query).TryGetValue("code", out var code))
        {
            Console.WriteLine($"인증 코드: {code}");
            AuthService.IsLoggedIn = true;
        }

        if (AuthService.IsLoggedIn == false) NavigationManager.NavigateTo("/login");
    }
}